Implementing UART driver in bare-metal code